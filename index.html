<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phoebes Designs - Luxury Nigerian Fashion, Academy & Blog</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://js.paystack.co/v1/inline.js"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Montserrat:wght@300;400;500;600&family=Playfair+Display:wght@400;500;600;700&display=swap"
        rel="stylesheet">
    <script>
        // NEW: A richer, more sophisticated color scheme
        tailwind.config = {
            theme: {
                extend: {
                    fontFamily: {
                        'sans': ['Montserrat', 'sans-serif'],
                        'serif': ['Playfair Display', 'serif'],
                    },
                    colors: {
                        'primary-bg': '#F7F5F2',      // Warm, creamy off-white
                        'primary-text': '#1A202C',    // Very dark charcoal (near-black)
                        'secondary-text': '#4A5568',  // Soft slate grey
                        'accent-blue': '#2C3E50',     // Rich, deep indigo
                        'accent-terracotta': '#C06C59', // Warm, earthy terracotta
                    }
                }
            }
        }
    </script>
    <style>
        /* NEW: Custom SVG background for a more luxurious feel */
        .hero-bg {
            background-color: #2C3E50;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40' viewBox='0 0 40 40'%3E%3Cg fill-rule='evenodd'%3E%3Cg fill='%2334495e' fill-opacity='0.4'%3E%3Cpath d='M0 38.59l2.83-2.83 1.41 1.41L1.41 40H0v-1.41zM0 1.4l2.83 2.83 1.41-1.41L1.41 0H0v1.41zM38.59 40l-2.83-2.83 1.41-1.41L40 38.59V40h-1.41zM40 1.41l-2.83 2.83-1.41-1.41L38.59 0H40v1.41zM20 18.6l2.83-2.83 1.41 1.41L21.41 20l2.83 2.83-1.41 1.41L20 21.41l-2.83 2.83-1.41-1.41L18.59 20l-2.83-2.83 1.41-1.41L20 18.59z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            background-size: auto;
            background-position: center;
        }

        .modal-overlay {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: rgba(0, 0, 0, 0.6);
            display: flex;
            align-items: center;
            justify-content: flex-end;
            /* Align cart to the right */
            z-index: 50;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }

        .modal-overlay.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            background: white;
            height: 100%;
            width: 90%;
            max-width: 450px;
            transform: translateX(100%);
            transition: transform 0.4s ease-in-out;
            display: flex;
            flex-direction: column;
        }

        .modal-overlay.active .modal-content {
            transform: translateX(0);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .fade-in {
            animation: fadeIn 0.5s ease-out forwards;
        }

        ::-webkit-scrollbar {
            width: 8px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        ::-webkit-scrollbar-thumb {
            background: #C06C59;
            border-radius: 4px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: #A95C4D;
        }
    </style>
</head>

<body class="font-sans bg-primary-bg text-primary-text">

    <!-- App Container -->
    <div id="app" class="min-h-screen">

        <!-- Header -->
        <header class="bg-white/80 backdrop-blur-md shadow-sm sticky top-0 z-40">
            <nav class="container mx-auto px-4 sm:px-6 lg:px-8">
                <div class="flex items-center justify-between h-20">
                    <a href="#" onclick="event.preventDefault(); app.navigateTo('home')"
                        class="flex items-center space-x-2">
                        <!-- Site Logo SVG -->
                        <img src="phoebes-designs-logo.svg" alt="Phoebes Designs Logo" class="h-24 w-auto" style="max-width:160px;">
                        <span class="font-serif text-2xl md:text-3xl font-bold text-primary-text tracking-wider">
                            PHOEBES DESIGNS
                        </span>
                    </a>
                    <div class="hidden lg:flex items-center space-x-10">
                        <a href="#" onclick="event.preventDefault(); app.navigateTo('home')"
                            class="hover:text-accent-terracotta transition">Home</a>
                        <a href="#" onclick="event.preventDefault(); app.navigateTo('shop')"
                            class="hover:text-accent-terracotta transition">Shop</a>
                        <a href="#" onclick="event.preventDefault(); app.navigateTo('academy')"
                            class="hover:text-accent-terracotta transition">Academy</a>
                        <a href="#" onclick="event.preventDefault(); app.navigateTo('blog')"
                            class="hover:text-accent-terracotta transition">Blog</a>
                        <a href="#" onclick="event.preventDefault(); app.navigateTo('contact')"
                            class="hover:text-accent-terracotta transition">Contact</a>
                    </div>
                    <div class="flex items-center space-x-4">
                        <button onclick="app.toggleCart()" class="relative hover:text-accent-terracotta transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z" />
                            </svg>
                            <span id="cart-indicator"
                                class="absolute -top-2 -right-2 bg-accent-terracotta text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-semibold">0</span>
                        </button>
                        <button class="lg:hidden" id="mobile-menu-button">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24"
                                stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                                    d="M4 6h16M4 12h16m-7 6h7" />
                            </svg>
                        </button>
                    </div>
                </div>
                <!-- Mobile Menu -->
                <div id="mobile-menu" class="hidden lg:hidden pb-4">
                    <a href="#" onclick="event.preventDefault(); app.navigateTo('home')"
                        class="block py-2 hover:text-accent-terracotta">Home</a>
                    <a href="#" onclick="event.preventDefault(); app.navigateTo('shop')"
                        class="block py-2 hover:text-accent-terracotta">Shop</a>
                    <a href="#" onclick="event.preventDefault(); app.navigateTo('academy')"
                        class="block py-2 hover:text-accent-terracotta">Academy</a>
                    <a href="#" onclick="event.preventDefault(); app.navigateTo('blog')"
                        class="block py-2 hover:text-accent-terracotta">Blog</a>
                    <a href="#" onclick="event.preventDefault(); app.navigateTo('contact')"
                        class="block py-2 hover:text-accent-terracotta">Contact</a>
                </div>
            </nav>
        </header>

        <!-- Main Content Area -->
        <main id="main-content">
            <!-- All page content will be dynamically rendered here -->
        </main>

    </div>

    <!-- Shopping Cart Modal (Side Panel) -->
    <div id="cart-modal" class="modal-overlay">
        <div class="modal-content">
            <div class="flex items-center justify-between p-6 border-b">
                <h2 class="text-xl font-bold font-serif">Your Shopping Bag</h2>
                <button onclick="app.toggleCart()" class="text-gray-500 hover:text-gray-800">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24"
                        stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                            d="M6 18L18 6M6 6l12 12" />
                    </svg>
                </button>
            </div>
            <div id="cart-items" class="flex-grow p-6 overflow-y-auto"></div>
            <div id="cart-footer" class="hidden p-6 border-t bg-gray-50">
                <div>
                    <div class="flex justify-between font-semibold"><span>Subtotal</span><span
                            id="cart-subtotal"></span></div>
                    <p class="text-sm text-secondary-text mt-1">Shipping & taxes calculated at checkout.</p>
                </div>
                <button onclick="app.navigateTo('checkout')"
                    class="w-full mt-4 bg-accent-blue text-white py-3 rounded-md font-semibold hover:bg-opacity-90 transition">Proceed
                    to Checkout</button>
            </div>
        </div>
    </div>

    <!-- Message Modal -->
    <div id="message-modal" class="modal-overlay" style="justify-content:center;">
        <div class="modal-content text-center p-6" style="height:auto; max-width: 400px; transform: translateY(-20px);">
            <div id="message-content"></div>
            <button onclick="document.getElementById('message-modal').classList.remove('active')"
                class="mt-6 w-full px-6 py-2 bg-accent-blue text-white rounded-md">Close</button>
        </div>
    </div>

    <!-- Footer -->
    <footer class="bg-primary-text text-white">
        <!-- Footer content remains the same, will inherit new color scheme -->
        <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-16">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-8 text-center md:text-left">
                <div>
                    <h3 class="font-serif text-xl font-bold">PHOEBES DESIGNS</h3>
                    <p class="mt-2 text-gray-400 text-sm">Crafting elegance, one stitch at a time.</p>
                </div>
                <div>
                    <h4 class="font-semibold tracking-wider uppercase">Quick Links</h4>
                    <ul class="mt-4 space-y-2 text-sm">
                        <li><a href="#" onclick="event.preventDefault(); app.navigateTo('shop')"
                                class="text-gray-400 hover:text-white">Shop</a></li>
                        <li><a href="#" onclick="event.preventDefault(); app.navigateTo('academy')"
                                class="text-gray-400 hover:text-white">Academy</a></li>
                        <li><a href="#" onclick="event.preventDefault(); app.navigateTo('blog')"
                                class="text-gray-400 hover:text-white">Blog</a></li>
                        <li><a href="#" onclick="event.preventDefault(); app.navigateTo('contact')"
                                class="text-gray-400 hover:text-white">Contact Us</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold tracking-wider uppercase">Support</h4>
                    <ul class="mt-4 space-y-2 text-sm">
                        <li><a href="#" onclick="event.preventDefault(); app.navigateTo('contact')"
                                class="text-gray-400 hover:text-white">Contact Us</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">FAQ</a></li>
                        <li><a href="#" class="text-gray-400 hover:text-white">Shipping & Returns</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold tracking-wider uppercase">Follow Us</h4>
                    <div class="mt-4 flex justify-center md:justify-start space-x-4">
                        <a href="#" class="text-gray-400 hover:text-white" aria-label="Instagram"><svg class="w-6 h-6"
                                fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.85s-.011 3.584-.069 4.85c-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07s-3.584-.012-4.85-.07c-3.252-.148-4.771-1.691-4.919-4.919-.058-1.265-.069-1.645-.069-4.85s.011-3.584.069-4.85c.149-3.225 1.664-4.771 4.919-4.919C8.356 2.175 8.734 2.163 12 2.163zm0 1.44c-3.117 0-3.504.012-4.73.07-2.73.124-4.112 1.5-4.233 4.233-.058 1.226-.07 1.613-.07 4.73s.012 3.504.07 4.73c.12 2.73 1.5 4.112 4.233 4.233 1.226.058 1.613.07 4.73.07s3.504-.012 4.73-.07c2.73-.12 4.112-1.5 4.233-4.233.058-1.226.07-1.613.07-4.73s-.012-3.504-.07-4.73c-.12-2.73-1.5-4.112-4.233-4.233-1.226-.058-1.613-.07-4.73-.07zm0 4.234a4.162 4.162 0 100 8.324 4.162 4.162 0 000-8.324zM12 16a2.72 2.72 0 110-5.44 2.72 2.72 0 010 5.44zm4.77-7.37a.96.96 0 100-1.92.96.96 0 000 1.92z" />
                            </svg></a>
                        <a href="#" class="text-gray-400 hover:text-white" aria-label="X/Twitter"><svg class="w-6 h-6"
                                fill="currentColor" viewBox="0 0 24 24">
                                <path
                                    d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z" />
                            </svg></a>
                    </div>
                </div>
            </div>
            <div class="mt-12 border-t border-gray-700 pt-8 text-center text-sm text-gray-400">
                &copy; 2025 Phoebes Designs. All Rights Reserved.
            </div>
        </div>
    </footer>

    <script>
        const app = {
            // --- STATE MANAGEMENT ---
            state: {
                currentPage: 'home',
                currentFilter: null,
                products: [], courses: [], posts: [], cart: [],
            },

            // --- INITIALIZATION ---
            init() {
                this.fetchData();
                this.setupEventListeners();
                this.render();
            },

            fetchData() {
                // Data is the same as previous version
                this.state.products = [
                    { id: 1, type: 'product', name: 'The Aurelia Gown', price: 185000, category: 'Bridal', image: 'https://placehold.co/600x800/FDFBF8/2C3E50?text=Aurelia+Gown', description: 'An ethereal bridal gown with hand-sewn pearls and a cascading tulle skirt. Made for the modern romantic.', featured: true },
                    { id: 2, type: 'product', name: 'Chioma Power Suit', price: 95000, category: 'Ready-to-Wear', image: 'https://placehold.co/600x800/C06C59/FFFFFF?text=Chioma+Suit', description: 'A chic and powerful two-piece suit in rich Adire silk, perfect for executive meetings or upscale events.', featured: true },
                    { id: 3, type: 'product', name: 'Lagos Nights Cocktail Dress', price: 95000, category: 'Evening Wear', image: 'https://placehold.co/600x800/1A202C/FFFFFF?text=Cocktail+Dress', description: 'Turn heads in this sequined cocktail dress, designed to shimmer and shine under city lights.', featured: true },
                    { id: 4, type: 'product', name: 'Bespoke Aso-Ebi', price: 250000, category: 'Bespoke', image: 'https://placehold.co/600x800/2C3E50/FFFFFF?text=Bespoke+Aso-Ebi', description: 'A fully customized Aso-Ebi masterpiece. Contact us for a consultation to bring your vision to life.' },
                    { id: 5, type: 'product', name: 'The Sade Wrap Blouse', price: 45000, category: 'Ready-to-Wear', image: 'https://placehold.co/600x800/FDFBF8/2C3E50?text=Sade+Blouse', description: 'A versatile and elegant wrap blouse made from lightweight Nigerian crepe.' },
                    { id: 6, type: 'product', name: 'The Oba Grand Bubu', price: 120000, category: 'Kaftans', image: 'https://placehold.co/600x800/C06C59/FFFFFF?text=Oba+Bubu', description: 'Feel like royalty in this flowing, embroidered Bubu, a timeless piece of ageless style.' },
                    { id: 7, type: 'product', name: 'Ankara Infinity Jumpsuit', price: 65000, category: 'Ready-to-Wear', image: 'https://placehold.co/600x800/1A202C/FFFFFF?text=Ankara+Jumpsuit', description: 'A vibrant, modern jumpsuit with convertible straps for endless styling options.' },
                    { id: 8, type: 'product', name: 'Celestial Reception Dress', price: 220000, category: 'Bridal', image: 'https://placehold.co/600x800/2C3E50/FFFFFF?text=Reception+Dress', description: 'Dance the night away in this stunning, embellished second dress for the modern bride.' },
                ];
                this.state.courses = [
                    { id: 101, type: 'course', name: 'Mastering Pattern Drafting', price: 50000, image: 'https://placehold.co/600x400/FDFBF8/1A202C?text=Pattern+Drafting', summary: 'From basic blocks to complex designs, learn the art of professional pattern making.', instructor: 'Ada Okoro' },
                    { id: 102, type: 'course', name: 'The Business of Fashion', price: 85000, image: 'https://placehold.co/600x400/C06C59/FFFFFF?text=Fashion+Business', summary: 'Learn how to launch, market, and scale your own fashion brand in the Nigerian market.', instructor: 'Bola Adebayo' },
                    { id: 103, type: 'course', name: 'Advanced Beading & Embellishment', price: 75000, image: 'https://placehold.co/600x400/1A202C/FFFFFF?text=Beading', summary: 'Master couture-level techniques for adding intricate beadwork and embellishments to garments.', instructor: 'Phoebe herself' },
                    { id: 104, type: 'course', name: 'Digital Fashion Illustration with Procreate', price: 45000, image: 'https://placehold.co/600x400/2C3E50/FFFFFF?text=Illustration', summary: 'Bring your fashion ideas to life on screen with this comprehensive guide to digital illustration.', instructor: 'Segun Adeoye' },
                ];
                this.state.posts = [
                    { id: 201, title: 'The New Nigerian Power Suit: Deconstructing the Modern Woman\'s Wardrobe', date: 'August 15, 2025', image: 'https://placehold.co/800x500/1A202C/FFFFFF?text=Power+Suit', author: 'The PD Team', content: '<p>The power suit is no longer confined to the boardroom. For the modern Nigerian woman, it\'s a statement of intent, blending heritage with global trends. This season, we\'re seeing a move away from traditional wools towards locally sourced fabrics like Adire silk and heavy crepes, offering both structure and fluidity.</p><p class="mt-4">We explore how to style these new silhouettes for any occasion, from pairing a sharp, tailored blazer with relaxed-fit trousers for a gallery opening, to the impact of a full, monochrome suit at a wedding. It’s about owning your presence, and the new Nigerian power suit is your armour.</p>' },
                    { id: 202, title: 'Anatomy of an Aso-Ebi: From Sketch to Grand Entrance', date: 'August 28, 2025', image: 'https://placehold.co/800x500/2C3E50/FFFFFF?text=Aso-Ebi+Process', author: 'Phoebe herself', content: '<p>The Aso-Ebi is more than just a uniform; it\'s a story woven in thread, a celebration of unity and style. But what truly goes into creating a bespoke Aso-Ebi masterpiece? We take you behind the seams on a journey that begins not with a needle, but with a conversation.</p><h3 class="font-serif text-xl font-bold mt-6 mb-2">The Consultation</h3><p>It all starts with understanding the client\'s vision, the event\'s theme, and the desired emotional impact. We discuss color palettes, silhouettes that flatter different body types, and the intricate details that will make the design unique.</p><h3 class="font-serif text-xl font-bold mt-6 mb-2">Fabric Sourcing & The Sketch</h3><p>Next, we source the perfect fabric, whether it\'s hand-dyed lace from the markets of Lagos Island or luxurious Swiss voiles. With fabric in hand, the vision comes to life in a detailed sketch, which is sent to the client for approval. This is where the dream begins to take shape.</p><p class="mt-4">From here, our master tailors take over, their years of experience evident in every stitch, leading to the final fitting where the garment is perfected. It\'s a labour of love, culminating in that unforgettable grand entrance.</p>' },
                ];
            },

            setupEventListeners() {
                document.getElementById('mobile-menu-button').addEventListener('click', () => document.getElementById('mobile-menu').classList.toggle('hidden'));
                document.getElementById('cart-modal').addEventListener('click', (e) => { if (e.target === e.currentTarget) this.toggleCart(); });
            },

            navigateTo(page, filter = null) {
                this.state.currentPage = page; this.state.currentFilter = filter;
                window.scrollTo(0, 0); this.render();
                if (page === 'checkout' && this.state.cart.length > 0) this.toggleCart(false);
                document.getElementById('mobile-menu').classList.add('hidden');
            },

            render() {
                const main = document.getElementById('main-content');
                let content = '';
                switch (this.state.currentPage) {
                    case 'home': content = this.renderHomePage(); break;
                    case 'shop': content = this.renderShopPage(); break;
                    case 'academy': content = this.renderAcademyPage(); break;
                    case 'blog': content = this.renderBlogPage(); break;
                    case 'contact': content = this.renderContactPage(); break;
                    case 'product': content = this.renderDetailPage(this.state.products.find(p => p.id === this.state.currentFilter)); break;
                    case 'course': content = this.renderDetailPage(this.state.courses.find(c => c.id === this.state.currentFilter)); break;
                    case 'post': content = this.renderDetailPage(this.state.posts.find(p => p.id === this.state.currentFilter)); break;
                    case 'checkout': content = this.renderCheckoutPage(); break;
                    default: content = this.renderHomePage();
                }
                main.innerHTML = content;
                this.updateCartIndicator();
                this.renderCart();
            },

            // NEW: Redesigned Home Page with centered hero text
            renderHomePage() {
                const featuredProducts = this.state.products.filter(p => p.featured).map(p => this.renderProductCard(p)).join('');
                return `
                <section class="hero-bg h-[70vh] md:h-[90vh] flex items-center justify-center text-primary-text">
                    <div class="text-center bg-primary-bg/80 backdrop-blur-sm p-8 md:p-12 rounded-lg max-w-2xl fade-in">
                        <h1 class="font-serif text-4xl md:text-6xl font-bold">Timeless Elegance, Redefined</h1>
                        <p class="mt-4 max-w-xl mx-auto text-lg text-secondary-text">Experience luxury fashion, meticulously crafted in the heart of Lagos.</p>
                        <button onclick="app.navigateTo('shop')" class="mt-8 px-8 py-3 bg-accent-blue text-white font-semibold rounded-md hover:bg-opacity-90 transition">Shop The Collection</button>
                    </div>
                </section>
                <section class="container mx-auto px-4 sm:px-6 lg:px-8 py-20">
                    <h2 class="text-3xl font-serif text-center font-bold mb-12">Featured Pieces</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-x-8 gap-y-12">${featuredProducts}</div>
                </section>
                 <section class="bg-white py-20">
                    <div class="container mx-auto px-4 sm:px-6 lg:px-8 text-center">
                         <h2 class="text-3xl font-serif text-center font-bold mb-4">From The Journal</h2>
                         <p class="max-w-2xl mx-auto text-secondary-text mb-12">Inspiration, stories, and insights from the world of Phoebes Designs.</p>
                         <div class="grid grid-cols-1 md:grid-cols-2 gap-10">
                            ${this.state.posts.map(p => this.renderBlogCard(p)).join('')}
                         </div>
                    </div>
                </section>
            `;
            },

            renderShopPage() {
                const allProducts = this.state.products.map(p => this.renderProductCard(p)).join('');
                return `<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12"><h1 class="text-4xl font-serif font-bold mb-8 text-center">Our Collection</h1><div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-x-8 gap-y-12">${allProducts}</div></div>`;
            },

            renderAcademyPage() {
                const allCourses = this.state.courses.map(c => this.renderCourseCard(c)).join('');
                return `<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12"><h1 class="text-4xl font-serif font-bold mb-2 text-center">The Fashion Academy</h1><p class="text-center text-secondary-text mb-12">Empowering the next generation of Nigerian designers.</p><div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-10">${allCourses}</div></div>`;
            },

            renderBlogPage() {
                const allPosts = this.state.posts.map((p, index) => this.renderBlogCard(p, index === 0)).join('');
                return `<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12"><h1 class="text-4xl font-serif font-bold mb-2 text-center">The Journal</h1><p class="text-center text-secondary-text mb-12">Inspiration, stories, and insights from the world of Phoebes Designs.</p><div class="grid grid-cols-1 md:grid-cols-2 gap-10">${allPosts}</div></div>`;
            },

            renderContactPage() {
                return `
                <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-16">
                    <h1 class="text-4xl font-serif font-bold mb-4 text-center">Get In Touch</h1>
                    <p class="text-center text-secondary-text mb-12 max-w-2xl mx-auto">We would love to hear from you. Whether it's a question about a bespoke piece, the academy, or a general enquiry, our team is ready to answer all your questions.</p>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-12 bg-white p-8 md:p-12 rounded-lg shadow-lg">
                        <div>
                            <h2 class="text-2xl font-serif font-bold mb-6">Send us a Message</h2>
                            <form id="contact-form" class="space-y-6">
                                <input type="text" placeholder="Your Name" required class="w-full border-gray-300 rounded-md p-3 focus:ring-accent-terracotta focus:border-accent-terracotta">
                                <input type="email" placeholder="Email Address" required class="w-full border-gray-300 rounded-md p-3 focus:ring-accent-terracotta focus:border-accent-terracotta">
                                <textarea rows="6" placeholder="Your Message" required class="w-full border-gray-300 rounded-md p-3 focus:ring-accent-terracotta focus:border-accent-terracotta"></textarea>
                                <button type="submit" class="w-full bg-accent-blue text-white py-3 rounded-md font-semibold hover:bg-opacity-90 transition">Send Message</button>
                            </form>
                        </div>
                        <div class="space-y-6">
                             <h2 class="text-2xl font-serif font-bold mb-6">Contact Information</h2>
                             <p class="flex items-start"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-accent-terracotta flex-shrink-0" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" /><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" /></svg><span>123 Adetokunbo Ademola Street,<br>Victoria Island, Lagos, Nigeria</span></p>
                             <p class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-accent-terracotta" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg><span>+234 801 234 5678</span></p>
                             <p class="flex items-center"><svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 mr-3 text-accent-terracotta" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z" /></svg><span>enquiries@phoebesdesigns.com</span></p>
                             <div class="h-48 bg-gray-200 rounded-lg mt-6"><!-- Map Placeholder --></div>
                        </div>
                    </div>
                </div>
            `;
            },

            renderDetailPage(item) {
                if (!item) { this.navigateTo('home'); return ''; }
                if (item.type === 'product' || item.type === 'course') {
                    return `<div class="container mx-auto px-4 sm:px-6 lg:px-8 py-16"><div class="grid grid-cols-1 md:grid-cols-2 gap-12 items-start"><img src="${item.image}" alt="${item.name}" class="w-full h-auto object-cover rounded-lg shadow-lg"><div><h4 class="text-sm uppercase tracking-widest text-accent-terracotta">${item.type === 'product' ? item.category : 'Online Course'}</h4><h1 class="text-4xl font-serif font-bold mt-2">${item.name}</h1><p class="text-3xl font-light my-4 text-accent-terracotta">₦${item.price.toLocaleString()}</p><p class="text-secondary-text leading-relaxed">${item.description || item.summary}</p><div class="mt-8"><button onclick="app.addToCart(${item.id}, '${item.type}')" class="w-full px-8 py-4 bg-accent-blue text-white font-semibold rounded-md hover:bg-opacity-90 transition">${item.type === 'product' ? 'Add to Bag' : 'Enroll Now'}</button></div></div></div></div>`;
                } else { // For Blog Posts
                    return `<div class="bg-white"><div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12 max-w-4xl"><img src="${item.image}" alt="${item.title}" class="w-full h-96 object-cover rounded-lg shadow-lg"><h1 class="text-5xl font-serif font-bold my-8 text-center">${item.title}</h1><p class="text-center text-secondary-text mb-8">${item.date} by ${item.author}</p><div class="prose lg:prose-xl mx-auto text-primary-text leading-relaxed">${item.content}</div></div></div>`;
                }
            },

            renderCheckoutPage() {
                // Unchanged from previous version
                if (this.state.cart.length === 0) {
                    this.navigateTo('shop');
                    return '<p>Your cart is empty. Redirecting...</p>';
                }
                const subtotal = this.state.cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                const hasPhysical = this.state.cart.some(item => item.type === 'product');
                const shipping = hasPhysical ? 7500 : 0;
                const total = subtotal + shipping;

                const summaryHTML = this.state.cart.map(item => `
                <div class="flex justify-between items-center text-sm py-2">
                    <div class="flex items-center">
                        <img src="${item.image}" class="w-12 h-16 object-cover rounded-md mr-4">
                        <div>
                           <p class="font-semibold">${item.name} (x${item.quantity})</p>
                           <p class="text-secondary-text text-xs">${item.type === 'product' ? item.category : 'Course'}</p>
                        </div>
                    </div>
                    <p>₦${(item.price * item.quantity).toLocaleString()}</p>
                </div>
            `).join('');

                return `
                 <div class="container mx-auto px-4 sm:px-6 lg:px-8 py-12">
                     <h1 class="text-4xl font-serif font-bold mb-8 text-center">Checkout</h1>
                     <div class="grid grid-cols-1 lg:grid-cols-2 gap-12">
                         <div>
                             <h2 class="text-2xl font-semibold mb-6">Contact & Shipping</h2>
                             <form id="checkout-form" class="space-y-4">
                                 <input type="email" id="email" placeholder="Email Address" required class="w-full border-gray-300 rounded-md p-3 focus:ring-accent-terracotta focus:border-accent-terracotta">
                                 ${hasPhysical ? `
                                 <input type="text" id="fullName" placeholder="Full Name" required class="w-full border-gray-300 rounded-md p-3 focus:ring-accent-terracotta focus:border-accent-terracotta">
                                 <input type="tel" id="phone" placeholder="Phone Number" required class="w-full border-gray-300 rounded-md p-3 focus:ring-accent-terracotta focus:border-accent-terracotta">
                                 <input type="text" id="address" placeholder="Delivery Address" required class="w-full border-gray-300 rounded-md p-3 focus:ring-accent-terracotta focus:border-accent-terracotta">
                                 <div class="grid grid-cols-2 gap-4">
                                    <input type="text" id="city" placeholder="City" required class="w-full border-gray-300 rounded-md p-3 focus:ring-accent-terracotta focus:border-accent-terracotta">
                                    <input type="text" id="state" placeholder="State (e.g. Lagos)" value="Lagos" required class="w-full border-gray-300 rounded-md p-3 focus:ring-accent-terracotta focus:border-accent-terracotta">
                                 </div>`
                        :
                        `<p class="text-sm text-secondary-text p-3 bg-gray-50 rounded-md">Shipping details are not required for digital courses.</p>
                                  <input type="hidden" id="fullName" value="N/A">
                                  <input type="hidden" id="phone" value="N/A">
                                  <input type="hidden" id="address" value="N/A">
                                  <input type="hidden" id="city" value="N/A">
                                  <input type="hidden" id="state" value="N/A">
                                 `}
                             </form>
                         </div>
                         <div class="bg-white p-8 rounded-lg shadow-lg">
                             <h2 class="text-2xl font-semibold mb-6">Order Summary</h2>
                             <div class="space-y-2 mb-6 divide-y">${summaryHTML}</div>
                             <div class="border-t pt-4 space-y-2">
                                 <div class="flex justify-between"><span>Subtotal</span><span>₦${subtotal.toLocaleString()}</span></div>
                                 <div class="flex justify-between text-secondary-text"><span>Shipping</span><span>${hasPhysical ? `₦${shipping.toLocaleString()}` : 'N/A'}</span></div>
                                 <div class="flex justify-between font-bold text-lg border-t pt-2 mt-2"><span>Total</span><span>₦${total.toLocaleString()}</span></div>
                             </div>
                             <button onclick="app.processPayment()" class="w-full mt-8 bg-accent-blue text-white py-3 rounded-md font-semibold hover:bg-opacity-90 transition">Pay with Paystack</button>
                         </div>
                     </div>
                 </div>`;
            },

            // FIX: The shop page now renders correctly
            renderProductCard(product) {
                return `
                <div class="group relative text-center">
                    <div class="w-full bg-gray-200 rounded-lg overflow-hidden">
                        <img src="${product.image}" alt="${product.name}" class="w-full h-96 object-center object-cover group-hover:scale-110 transition-transform duration-500">
                    </div>
                    <div class="mt-4">
                        <h3 class="text-lg font-semibold"><a href="#" onclick="event.preventDefault(); app.navigateTo('product', ${product.id})" class="hover:text-accent-terracotta transition">${product.name}</a></h3>
                        <p class="mt-1 text-md text-secondary-text">₦${product.price.toLocaleString()}</p>
                    </div>
                </div>`;
            },

            renderBlogCard(post, isFeatured = false) {
                const summary = post.content.replace(/<[^>]+>/g, '').substring(0, 120);
                const containerClass = isFeatured ? 'md:col-span-2' : '';
                return `
                <div class="${containerClass} group bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300">
                    <img src="${post.image}" alt="${post.title}" class="w-full h-56 object-cover">
                    <div class="p-6">
                        <p class="text-sm text-secondary-text">${post.date}</p>
                        <h3 class="text-xl font-serif font-bold mt-2">${post.title}</h3>
                        <p class="mt-4 text-secondary-text">${summary}...</p>
                        <button onclick="app.navigateTo('post', ${post.id})" class="mt-6 text-sm font-semibold text-accent-blue hover:underline">Read More &rarr;</button>
                    </div>
                </div>`;
            },
            renderCourseCard(course) {
                return `
                <div class="group bg-white rounded-lg shadow-lg overflow-hidden transform hover:-translate-y-2 transition-transform duration-300">
                    <img src="${course.image}" alt="${course.name}" class="w-full h-48 object-cover">
                    <div class="p-6">
                        <h3 class="text-xl font-serif font-bold">${course.name}</h3>
                        <p class="text-sm text-secondary-text mt-1">with ${course.instructor}</p>
                        <p class="mt-4 text-secondary-text h-20">${course.summary}</p>
                        <div class="flex justify-between items-center mt-6">
                            <span class="text-2xl font-semibold text-accent-terracotta">₦${course.price.toLocaleString()}</span>
                            <button onclick="app.navigateTo('course', ${course.id})" class="text-sm font-semibold text-accent-blue hover:underline">View Course</button>
                        </div>
                    </div>
                </div>`;
            },

            // Cart and Payment logic remain the same
            addToCart(itemId, itemType) {
                const source = itemType === 'product' ? this.state.products : this.state.courses;
                const itemToAdd = source.find(p => p.id === itemId);
                const cartItem = this.state.cart.find(item => item.id === itemId);
                if (cartItem) { cartItem.quantity++; } else { this.state.cart.push({ ...itemToAdd, quantity: 1 }); }
                this.showMessage(`${itemToAdd.name} added to bag!`);
                this.render();
                this.toggleCart(true);
            },
            updateCartQuantity(itemId, change) {
                const cartItem = this.state.cart.find(item => item.id === itemId);
                if (cartItem) {
                    cartItem.quantity += change;
                    if (cartItem.quantity <= 0) {
                        this.state.cart = this.state.cart.filter(item => item.id !== itemId);
                    }
                }
                this.render();
            },
            renderCart() {
                const container = document.getElementById('cart-items');
                const footer = document.getElementById('cart-footer');
                if (this.state.cart.length === 0) {
                    container.innerHTML = '<p class="text-secondary-text text-center mt-8">Your bag is empty.</p>';
                    footer.classList.add('hidden');
                    return;
                }
                footer.classList.remove('hidden');
                container.innerHTML = this.state.cart.map(item => `
                <div class="flex items-start justify-between py-4">
                    <div class="flex">
                         <img src="${item.image}" alt="${item.name}" class="w-20 h-24 object-cover rounded-md mr-4">
                         <div>
                            <p class="font-semibold text-sm">${item.name}</p>
                            <p class="text-xs text-secondary-text">${item.type === 'course' ? 'Online Course' : item.category}</p>
                            <p class="text-sm text-primary-text mt-2">₦${item.price.toLocaleString()}</p>
                         </div>
                    </div>
                    <div class="text-right">
                        <div class="flex items-center border rounded-md w-24">
                            <button onclick="app.updateCartQuantity(${item.id}, -1)" class="px-2 py-1 text-lg">-</button>
                            <span class="px-2 flex-grow text-center">${item.quantity}</span>
                            <button onclick="app.updateCartQuantity(${item.id}, 1)" class="px-2 py-1 text-lg">+</button>
                        </div>
                         <button onclick="app.updateCartQuantity(${item.id}, -Infinity)" class="text-xs text-red-500 hover:underline mt-2">Remove</button>
                    </div>
                </div>
            `).join('');
                const subtotal = this.state.cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                document.getElementById('cart-subtotal').textContent = `₦${subtotal.toLocaleString()}`;
            },
            updateCartIndicator() {
                const indicator = document.getElementById('cart-indicator');
                indicator.textContent = this.state.cart.reduce((sum, item) => sum + item.quantity, 0);
            },
            toggleCart(forceState = null) {
                const modal = document.getElementById('cart-modal');
                modal.classList.toggle('active', forceState);
            },
            processPayment() {
                const form = document.getElementById('checkout-form');
                if (!form.checkValidity()) {
                    form.reportValidity();
                    this.showMessage('Please fill in all required fields.', 'error');
                    return;
                }

                const subtotal = this.state.cart.reduce((sum, item) => sum + item.price * item.quantity, 0);
                const hasPhysical = this.state.cart.some(item => item.type === 'product');
                const shipping = hasPhysical ? 7500 : 0;
                const totalInKobo = (subtotal + shipping) * 100;

                const paystackKey = 'pk_test_b8156e17a410319119275b22b406e987c95e1c45';
                if (paystackKey.includes('xxxx')) {
                    this.showMessage('Payment gateway not configured by site owner.', 'error');
                    return;
                }

                PaystackPop.setup({
                    key: paystackKey,
                    email: document.getElementById('email').value,
                    amount: totalInKobo,
                    currency: 'NGN',
                    ref: 'PD' + Math.floor((Math.random() * 1000000000) + 1),
                    metadata: {
                        customer_name: document.getElementById('fullName').value,
                        phone_number: document.getElementById('phone').value,
                        cart_items: this.state.cart.map(i => `${i.name} (x${i.quantity})`).join(', ')
                    },
                    callback: (response) => {
                        console.log('Payment successful:', response);
                        this.showMessage('Payment complete! Thank you for your order.', 'success');
                        this.state.cart = [];
                        form.reset();
                        this.navigateTo('home');
                    },
                    onClose: () => {
                        this.showMessage('Transaction was not completed. Your order was not placed.', 'error');
                    }
                }).openIframe();
            },
            showMessage(message, type = 'success') {
                const modal = document.getElementById('message-modal');
                const content = document.getElementById('message-content');
                const icon = type === 'success' ? `<svg class="h-12 w-12 text-green-500 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>` : `<svg class="h-12 w-12 text-red-500 mx-auto mb-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z" /></svg>`;
                content.innerHTML = `${icon}<p class="text-lg">${message}</p>`;
                modal.classList.add('active');
            }
        };

        document.addEventListener('DOMContentLoaded', () => app.init());
    </script>

</body>

</html>